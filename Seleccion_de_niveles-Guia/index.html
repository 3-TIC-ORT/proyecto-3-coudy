<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coudy</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="website icon" type="png" href="../img/cara-coudy.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Josefin+Sans:ital,wght@0,100..700;1,100..700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="caraCoudy"></div>
    <p class="texto">Selección de niveles</p>
    <div class="image-circle" id="image-circle"></div>
    <input type="file" id="file-input" class="file-input" accept="image/*">
    <p id="nombreUsuario" class="nombreUsuario"></p>
    <div class="mi-div"></div>
    <div class="tres-flechas" id="tresFlechas"></div>
    <div class="isla-html" onclick="guardarInfo()"></div>
    <div id="islaCss" class="isla-css"></div>
    <div id="candadoCss" class="candado-css"></div>
    <div id="islaJs" class="isla-js"></div>
    <div id="candadoJs" class="candado-js"></div>
    </div>
    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <p class="felicidades">¡¡Felicidades!!</p>
            <div class="imagenCoudy"></div>
            <p class="mas-txt">Haz completado todos los niveles</p>
            <div class="festejo1"></div>
            <div class="festejo2"></div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.4/socket.io.js"></script>
    <script src="../socket.js"></script>
    <script src="../database.js"></script>    
    <script src="../database.js"></script>
    <script src="../nav.js"></script>
    <script>
        connect2Server();

        function guardarInfo(){
            window.location.href='../HTML\'S_FOLDER/HTML-1/index.html'            
        }

        document.addEventListener("DOMContentLoaded", ()=>{            
            let verifyHtml = obtenerNivelHtmlAlcanzado() == 22;
            let verifyCss = obtenerNivelCssAlcanzado() == 22;
            let verifyJs = obtenerNivelJsAlcanzado() == 30;
            let candadoHtml = document.getElementById('candadoCss');
            let islaCss = document.getElementById('islaCss');
            let candadoCss = document.getElementById('candadoJs');
            let islaJs = document.getElementById('islaJs');
            let verifyAnimationCss = obtenerAnimacionFinished("Css");
            let verifyAnimationJs = obtenerAnimacionFinished("Js");                        

            console.log("verifyHtml = " + verifyHtml);
            console.log("verifyCss = " + verifyCss);
            console.log("verifyJs = " + verifyJs);
            console.log("verifyAnimationCss = " + verifyAnimationCss);
            console.log("verifyAnimationJs = " + verifyAnimationJs);
            if(verifyHtml){
                islaCss.addEventListener('click', ()=>{
                window.location.href = "../CSS'S_FOLDER/CSS-1/index.html";                 
            })
            islaCss.style.cursor = 'pointer';
            islaCss.classList.add('islaC');
            candadoHtml.style.marginTop = "200vh";
        }
            if (verifyCss) {
    islaJs.addEventListener('click', () => { 
        window.location.href = "../JS'S_FOLDER/JS-1/index.html";         
    });
    islaJs.style.cursor = 'pointer';
    islaJs.classList.add('islaJ');
    candadoCss.style.marginTop = "200vh";
}
             if(verifyHtml && verifyCss) 
            {
                if (!verifyAnimationJs)
                {
                    candadoCss.classList.add('romperCandadoJs')
                    islaJs.style.cursor = 'pointer';
                    islaJs.classList.add('islaJ');
                    setTimeout(() => {
                        modificarAnimacionFinished("Js",true);
                    }, 7000);
                }
                else
                {
                    candadoCss.classList.add('mantener');
                    islaJs.style.cursor = 'pointer';
                    islaJs.classList.add('islaJ');
                }
            } 
            else if(verifyHtml){                        
                if (!verifyAnimationCss)
                {
                    candadoHtml.classList.add('romperCandadoCss');
                    islaCss.style.cursor = 'pointer';
                    islaCss.classList.add('islaC');
                    setTimeout(() => {
                        modificarAnimacionFinished("Css",true);
                    }, 7000);
                }
                else
                {
                    candadoHtml.classList.add('mantener')
                    islaCss.style.cursor = 'pointer';
                    islaCss.classList.add('islaC')
                }
            } 
            
            else if(verifyHtml){
                candadoHtml.classList.add('mantener')
                islaCss.style.cursor = 'pointer';
                islaCss.classList.add('islaC')
            } else if(verifyCss){
                candadoCss.classList.add('mantener')
                islaJs.style.cursor = 'pointer';
                islaJs.classList.add('islaJ')
            } if(verifyHtml && verifyCss && verifyJs && !verifyAnimationJs ){
                const modal = document.getElementById("myModal");
                const span = document.getElementsByClassName("close")[0];
                modal.style.display = "block";

                span.onclick = function() {
                    modal.style.display = "none";
                    modificarAnimacionFinished("Js", true);
                }

                window.onclick = function(event) {
                if (event.target == modal) {
                    modal.style.display = "none";
                    modificarAnimacionFinished("Js", true);
                    }
                }
            }
        })
        
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.4/socket.io.js"></script>
    <script src="../socket.js"></script>
    <script src="../database.js"></script>        
</body>
</html>